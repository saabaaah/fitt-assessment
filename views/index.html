<!DOCTYPE html>
<html>
  <head>
    <title>Buy</title>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">

  </head>

  <body class="bg-gray-900">

    <div class="flex justify-center mt-32">
      <form action="/charge" method="POST" class="flex flex-col w-1/3">
        <input class="bg-transparent text-white p-2 h-10 mb-4" type="text" name="name" placeholder="Name">
        <input type="email" class="bg-transparent text-white p-2 h-10 mb-4" name="email" placeholder="Email">
        <input class="bg-transparent text-white p-2 h-10 mb-4" type="text" name="amount" placeholder="Amount">
  
        <div id="card-element" class="bg-transparent text-white p-2 h-10 mb-4"></div>
        <div id="card-errors" role="alert"></div>
        <button class="text-white bg-purple-900 p-4 rounded">Submit Payment</button>
      </form>
    </div>
  </body>
  
  <script src="https://js.stripe.com/v3/"></script>
  <script type="text/javascript">
    const PUB_KEY = "pk_test_51J6zIYADwWAPGjD10jFKpP7FXGmzydGShHIjJXc973oquGZ7dnhLvP2NVN80LEWcamPQetFqp6a8qc6GgbCkmPIW00t9P9BJuH";
    const stripe = Stripe(PUB_KEY); // Your Publishable Key
    const elements = stripe.elements();

    // Create our card inputs
    var style = {
      base: {
        color: "#fff"
      }
    };

    const card = elements.create('card', { style });
    card.mount('#card-element');

    const form = document.querySelector('form');
    const errorEl = document.querySelector('#card-errors');

    // Give our token to our form
    const stripeTokenHandler = token => {
      const hiddenInput = document.createElement('input');
      hiddenInput.setAttribute('type', 'hidden');
      hiddenInput.setAttribute('name', 'stripeToken');
      hiddenInput.setAttribute('value', token.id);
      form.appendChild(hiddenInput);

      form.submit();
    }

    // Create token from card data
    form.addEventListener('submit', e => {
      e.preventDefault();

      stripe.createToken(card).then(res => {
        if (res.error) errorEl.textContent = res.error.message;
        else stripeTokenHandler(res.token);
      })
    })
  </script>
</html>